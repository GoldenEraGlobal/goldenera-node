# Spring profile
SPRING_PROFILES_ACTIVE="prod"

# Admin PORT & Explorer PORT
LISTEN_PORT=8080

# Explorer enable (if false, explorer will not sync and will not be available)
EXPLORER_ENABLE=false

# Node
NODE_IDENTITY_FILE="./node_data/.node_identity"
BLOCKCHAIN_DB_PATH="./node_data/blockchain"
PEER_REPUTATION_DB_PATH="./node_data/peer-reputation"
# =============================================================================
# MEMORY CONFIGURATION
# =============================================================================
# 
# Memory layout for GoldenEra Node:
#   - Java Heap (JAVA_HEAP_MB):     JVM memory for application (configurable)
#   - RocksDB Block Cache:          Native memory for disk cache (configurable)
#   - RandomX Dataset:              ~2.5 GB (FIXED, required for mining)
#   - OS + postgre buffers:                 ~1.5 GB
#
# EXAMPLES by VPS size:
#   8GB VPS:  JAVA_HEAP_MB=2048,  ROCKSDB_BLOCK_CACHE_MB=1024
#   16GB VPS: JAVA_HEAP_MB=8192,  ROCKSDB_BLOCK_CACHE_MB=2048
#   32GB VPS: JAVA_HEAP_MB=16384, ROCKSDB_BLOCK_CACHE_MB=8192
#
# Leave empty for auto-calculation (recommended for beginners)
# =============================================================================
JAVA_HEAP_MB=

# =============================================================================
# RocksDB Tuning
# =============================================================================
# Block cache: main read cache, shared across all column families (OFF-HEAP memory!)
# See memory examples above for recommended values
ROCKSDB_BLOCK_CACHE_MB=512

# Write buffer (memtable) size per column family
# Larger = better write throughput, higher memory usage
ROCKSDB_WRITE_BUFFER_MB=64

# Max write buffers per CF (allows writes during flush)
ROCKSDB_MAX_WRITE_BUFFERS=4

# Background jobs for compaction/flush (set to CPU cores / 2)
ROCKSDB_MAX_BACKGROUND_JOBS=6

# SST block size (16KB good for point lookups, increase for scan-heavy workloads)
ROCKSDB_BLOCK_SIZE_KB=16

# Bloom filter bits per key (10 = ~1% false positive rate)
ROCKSDB_BLOOM_FILTER_BITS=10

# Direct I/O (recommended for Linux, reduces double-buffering)
ROCKSDB_DIRECT_READS=true
ROCKSDB_DIRECT_WRITES=true

# Rate limit for background I/O in MB/s (0 = unlimited)
# Set to ~50-100 on slower disks to prevent compaction from starving reads
ROCKSDB_RATE_LIMIT_MB_PER_SEC=0

# =============================================================================
# BlobDB for Large Values (StoredBlock up to 7MB)
# =============================================================================
# Enable BlobDB for CF_BLOCKS (separates large values from LSM tree)
ROCKSDB_BLOB_ENABLED=true

# Minimum value size to store in blob files (bytes)
# Values >= this go to blob files, smaller stay in SST
# 64KB is good threshold - most headers are smaller, full blocks are larger
ROCKSDB_BLOB_MIN_BYTES=65536

# Blob file size in MB (256MB recommended for GCloud PD SSD)
ROCKSDB_BLOB_FILE_SIZE_MB=256

# Enable blob garbage collection during compaction
ROCKSDB_BLOB_GC_ENABLED=true

# Blob GC age cutoff (0.0-1.0): GC when this fraction of blobs are garbage
ROCKSDB_BLOB_GC_AGE_CUTOFF=0.25

# =============================================================================
# Application Cache (Caffeine - in-heap caching)
# =============================================================================
# Block cache: full StoredBlock objects
CACHE_BLOCK_MB=256

# Trie node cache: WorldState MPT nodes (critical for state lookups)
CACHE_TRIE_NODE_MB=256

# Transaction cache
CACHE_TX_MB=128

# Header cache: partial blocks (headers only) - entry count
CACHE_HEADER_MAX_ENTRIES=50000

# Height-to-hash cache - entry count
CACHE_HEIGHT_MAX_ENTRIES=100000

# Cache expiration time in minutes
CACHE_EXPIRE_MINUTES=60

# Network
NETWORK="MAINNET"
BENEFICIARY_ADDRESS="0x0000000000000000000000000000000000000000"

# P2P (use the public IP address!)
P2P_HOST=
P2P_PORT=9000

# Directory
DIRECTORY_PING_INTERVAL_IN_MS=30000

# Mempool
MEMPOOL_MAX_SIZE=100000
MEMPOOL_EXPIRE_TX_IN_MINUTES=60
MEMPOOL_MIN_ACCEPTABLE_FEE_IN_WEI=10
MEMPOOL_MAX_NONCE_GAP_PER_SENDER=64

# Mining
MINING_ENABLE=false
MINING_HASHING_THREADS=-1

# PostgreSQL
POSTGRESQL_HOST="localhost"
POSTGRESQL_PORT=5432
POSTGRESQL_DB_NAME="node_db"
POSTGRESQL_USERNAME="postgres"
POSTGRESQL_PASSWORD="postgres"

# Security
# openssl rand -base64 32
SECURITY_HMAC_SECRET=""
SECURITY_AES_GCM_SECRET=""
# If true, core-api security will be enabled (all endpoints will require API key)
SECURITY_CORE_API_ENABLED=false
SECURITY_EXPLORER_API_ENABLED=true

# Admin
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="abc123"

# Logging
LOGGING_DIR="./node_logs"
LOGGING_FILE="goldenera.log"
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_GLOBAL_GOLDENERA=INFO

# Throttling (api & p2p rate limiting)

# GLOBAL SAFETY NET (Per IP) - Applied to EVERYTHING
# Allows 500 requests per second. Just to stop DDoS scripts.
THROTTLING_GLOBAL_CAPACITY=500
THROTTLING_GLOBAL_REFILL_TOKENS=500

# PUBLIC CORE (Per IP) - Unauthenticated access to Core
# Strict: 100 tokens capacity, refills 20 per second.
THROTTLING_PUBLIC_CORE_CAPACITY=100
THROTTLING_PUBLIC_CORE_REFILL_TOKENS=20

# API KEY: DEFAULT / MEGA LOOSE (Per Key) - For everything else
# Mega Loose: 5000 tokens capacity, refills 2000 per second.
THROTTLING_API_KEY_DEFAULT_CAPACITY=5000
THROTTLING_API_KEY_DEFAULT_REFILL_TOKENS=2000

# API KEY: EXPLORER (Per Key) - Heavy queries
# Reasonable: 500 tokens capacity, refills 100 per second.
THROTTLING_API_KEY_EXPLORER_CAPACITY=500
THROTTLING_API_KEY_EXPLORER_REFILL_TOKENS=100

# P2P (Per Peer) - Protection against flood
# High throughput: 20000 capacity, refills 10000 per second (supports ~5000 TPS + overhead)
THROTTLING_P2P_CAPACITY=20000
THROTTLING_P2P_REFILL_TOKENS=10000